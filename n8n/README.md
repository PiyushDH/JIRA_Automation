# n8n: JIRABot Workflow

This folder contains an n8n workflow that automates Jira issue enrichment using OpenAI. It can:
- Listen for incoming requests via a Webhook or Chat Trigger
- Look up one or many Jira issues
- Generate structured Description and Acceptance Criteria content
- Update Jira issue fields (e.g., Description) via API
- Respond back to the caller

## Files
- `JIRABot.json`: The original workflow export (references local n8n credentials by name/id; contains no API keys).
- `JIRABot.template.json`: A sanitized template with placeholders you can safely share or import elsewhere.

## What It Does (Detailed)
- Trigger:
  - `When chat message received` (Chat Trigger) and/or `Webhook` node (path `<WEBHOOK_PATH>` in the template).
- LLMs:
  - Two OpenAI chat model nodes drive content creation: a Description agent and an AC (Acceptance Criteria) agent.
- Jira Tools:
  - `Get an issue in Jira Software` and `Get many issues in Jira Software` read from Jira.
  - `Update Desc of an issue in Jira Software` updates the Description field.
  - An `HTTP Request` node demonstrates updating Jira via REST using predefined Jira credentials in n8n.
- Flow Overview:
  1. Trigger receives a request (webhook or chat).
  2. Workflow may fetch current issue(s) from Jira.
  3. OpenAI agents generate structured content based on existing Description and user-provided instructions.
  4. Workflow updates Jira (e.g., Description), then responds to the caller.

## Sensitive Information & Placeholders
The committed workflow does not include API keys. n8n stores secrets inside its credential store. To make sharing safer, `JIRABot.template.json` replaces potentially sensitive or instance-specific values with placeholders you should fill or reconfigure after import:

- `<OPENAI_CREDENTIAL_NAME>`: Name of your OpenAI credential in n8n.
- `<OPENAI_CREDENTIAL_ID>`: Internal ID for the OpenAI credential (assigned by n8n; not required to set manually).
- `<JIRA_CREDENTIAL_NAME>`: Name of your Jira credential in n8n.
- `<JIRA_CREDENTIAL_ID>`: Internal ID for the Jira credential (assigned by n8n; not required to set manually).
- `<JIRA_DOMAIN>`: Your Jira Cloud domain (e.g., `yourtenant`). Appears in API URLs: `https://<JIRA_DOMAIN>.atlassian.net/...`.
- `<WEBHOOK_PATH>`: Path segment for the Webhook node (e.g., `n8n-jira`).
- `<WEBHOOK_ID>`: Webhook ID generated by n8n (assigned on create; informational only).
- `<WORKFLOW_ID>`, `<VERSION_ID>`, `<INSTANCE_ID>`: n8n-assigned identifiers; informational only.

Notes:
- You generally do not need to edit IDs (`*_ID` placeholders). After import, open each node in the n8n editor and select your actual credentials by name.
- Ensure no Authorization headers or tokens are hard-coded in nodes. This workflow uses n8n credential types (`openAiApi`, `jiraSoftwareCloudApi`), so keys remain in n8n’s credential store.

## Setup (Import & Configure)
1. In your n8n instance, Import `JIRABot.template.json`.
2. Open nodes that use credentials and select your actual credentials by name:
   - OpenAI nodes: choose your OpenAI API credential.
   - Jira nodes / HTTP Request node: choose your Jira credential.
3. Update instance-specific values:
   - Webhook node: set `Path` to your desired `<WEBHOOK_PATH>`.
   - Any Jira API URLs: confirm domain matches `https://<JIRA_DOMAIN>.atlassian.net`.
4. Activate the workflow if you want the webhook to be reachable.

## Usage
- Webhook: send a POST to `https://<your-n8n-host>/webhook/<WEBHOOK_PATH>` with the expected payload.
- Chat Trigger: if enabled, send a message via the configured chat interface.

## Troubleshooting
- If updates to Jira fail, ensure the Jira credential has required scopes and that the issue key exists.
- If LLM nodes error, verify OpenAI credentials and available model names.